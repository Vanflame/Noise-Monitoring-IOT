---

# IoT-Based Smart Classroom Noise Monitoring Using Traffic Light Indicator System

**Final System Design and Setup**

---

## ğŸŸ¢ 1. Web Dashboard (MAIN PAGE)

This is the **first page** shown after login.

### Displayed Information:

- Total noise incidents today
- Red-level alerts this week
- Most noisy classroom (chart)
- Peak noise time (e.g., 10:00â€“11:00 AM)

ğŸ’¡ **Panel keyword:** *At-a-glance monitoring*

---

## ğŸŸ¡ 2. Noise Logs Page (CORE FEATURE)

This page contains the **primary system records**.

### Each log entry shows:

- Date & Time
- Room / Classroom
- Noise Level (dB)
- Indicator Status (Green / Yellow / Red)
- Buzzer Triggered (Yes / No)
- Audio Recorded (Yes / No)
- Duration of Excessive Noise

### Filters:

- Date range
- Room
- Severity
- Subject / Teacher

---

## ğŸ”´ 3. Audio Evidence Page (ADMIN ONLY)

To ensure privacy and ethical use:

- Only **RED-level** events are shown
- Audio length is **limited to 3â€“5 seconds**
- Recordings are **automatically deleted** after a set retention period (7â€“14 days)

**Official policy statement:**

> â€œAudio recordings are event-triggered, short, and access-controlled. The system does not support continuous recording or live listening.â€
> 

---

## âš™ï¸ 4. System Settings Page (ADMIN ONLY)

### Configurable Parameters:

- Noise thresholds for Green / Yellow / Red
- Buzzer behavior:
    - Enable / Disable
    - Maximum number of beeps
    - Cooldown interval (e.g., 10 seconds)
- Audio recording length (3â€“5 seconds)
- Alert cooldown duration

âœ” Demonstrates **system flexibility and administrative control**

---

## ğŸ“Š 5. Reports & Analytics Page

Used primarily for **evaluation and decision support**.

### Includes:

- Daily / weekly / monthly noise trends
- Bar chart of noise incidents per classroom
- Heatmap of noise intensity by time of day

### Export Options:

- PDF (official reports)
- CSV (data analysis)

---

# ğŸ” Authorized User Functions

## âœ… Authentication

- Username and password
- Role-based permissions
- Automatic session timeout

## âœ… Authorization

- Teachers can access **only their assigned classrooms**
- Admins can access **all classrooms and settings**
- Configuration settings are **admin-only**

## âœ… Audit Trail

System logs:

- Threshold changes
- Buzzer configuration updates
- Audio access (who, when, which clip)

---

## âœ… Controlled Teacher Access Model

### Teachers CAN:

- View RED-level events from their assigned classroom
- Listen to short audio clips (read-only)
- Access recordings within **24â€“48 hours only**

### Teachers CANNOT:

- Download or share audio
- Access other classrooms
- Access long-term archives
- Delete records

**Access Policy Statement:**

> â€œTeachers are granted limited, read-only access to short, event-triggered audio clips from their own classes for validation purposes only. All access is time-bound and logged.â€
> 

---

## ğŸ” Technical Privacy Safeguards

### Time-Limited Access

- Teachers: 24â€“48 hours
- Admins: 7â€“14 days

### Read-Only Streaming

- Play button only
- No download
- No sharing

### Full Audit Logging

- User identity
- Timestamp
- Recording ID

---

## ğŸ¨ UI Behavior Summary

### ğŸ‘¨â€ğŸ« Teacher View:

- Noise Level: **82 dB (RED)**
- Time: **10:32 AM**
    - Action Button: **â€œReview Clip (5 sec)â€**
- Room: **ICT Lab 2**
- Status Indicator: ğŸ”´

### ğŸ§‘â€ğŸ’¼ Admin View:

- All teacher-visible data
- Threshold and escalation controls
- Retention policy settings
- Archive / delete controls

---

# ğŸ§± System Architecture

## High-Level Architecture (3 Layers)

---

## Layer 1 â€“ Edge / Classroom Layer

*(Installed in each classroom)*

### Hardware Components:

- ESP32 microcontroller
- **INMP441 digital microphone (I2S â€“ real audio sensing)**
- Traffic light LEDs (Green / Yellow / Red)
- Buzzer
- Status LED (Wi-Fi & system state)
- Internal flash storage (NVS)

### Responsibilities:

- Continuous noise sampling (100â€“200 ms)
- dB computation and smoothing
- Escalation-based alert logic
- Event-triggered audio capture
- Offline event buffering

---

## Layer 2 â€“ Backend / Server Layer

*(Centralized and secure)*

### Components:

- REST API server
- PostgreSQL / Supabase database
- Secure audio storage
- Authentication & RBAC module

### Responsibilities:

- Store noise events and metadata
- Manage audio retention
- Enforce access control
- Provide data to the web dashboard

---

## Layer 3 â€“ Web Application Layer

*(Teachers and Administrators)*

### Components:

- Web dashboard (React / Vue / HTML)
- Charts and analytics
- Role-based UI views

### Responsibilities:

- Data visualization
- Event validation
- Analytics and reporting
- System configuration (admin only)

---

# ğŸ” Complete System Flow

## Step 1: Continuous Noise Sampling

- INMP441 samples audio every 100â€“200 ms
- Converts signal to dB values
- Applies moving-average smoothing

---

## Step 2: Threshold Evaluation

### Example Thresholds:

- Green: < 60 dB
- Yellow: 60â€“74 dB
- Red: â‰¥ 75 dB

```
IF dB < Green â†’ Green LED
ELSE IF dB < Red â†’ Yellow LED
ELSE â†’ Red LED

```

---

## Step 3: RED-Level Trigger (Event-Based)

```
IF dB â‰¥ Red threshold
FOR â‰¥ 2â€“3 seconds
THEN confirm RED event

```

âœ” Prevents false positives

---

## Step 4: Escalation-Based Buzzer Logic

- Loud â‰¥ 2 seconds â†’ 1 short beep
- Loud â‰¥ 30 seconds â†’ 2 short beeps
- Loud â‰¥ 60 seconds â†’ Major violation logged

âœ” No continuous buzzing

âœ” Classroom-friendly alerts

### Limits:

- Max beeps per event
- Max total alert duration (e.g., 30 seconds)

---

## Step 5: Audio Capture

- Triggered only during confirmed RED events
- Records **3â€“5 seconds only**
- No live listening
- No continuous recording

---

## Step 6: Offline-Safe Data Logging

When Wi-Fi is unavailable:

```
Noise Event â†’ Stored in ESP32 Flash (NVS)
Wi-Fi Restored â†’ Automatic Cloud Sync

```

âœ” No data loss

âœ” No reboot required

---

## Step 7: Web App Visualization

- Users log in
- Data displayed based on role permissions

---

# ğŸ“‹ Trigger Summary

| Trigger | System Action |
| --- | --- |
| dB enters Yellow | Yellow LED |
| dB sustained at Red | Red LED |
| Red event confirmed | Log event |
| Red event confirmed | Record 3â€“5 sec audio |
| Red event confirmed | Buzzer escalation |
| Data uploaded | Dashboard update |

---

# ğŸ” Security & Ethics (Explicit)

- No continuous audio recording
- No live listening
- Role-based access control
- Time-bound audio availability
- Automatic deletion of recordings
- Full audit logging

---

# âš™ï¸ Hotspot Setup Mode (Self-Configuration)

When unconfigured, the ESP32 creates:

```
SSID: Classroom-Noise-Setup
IP:   192.168.4.1

```

## Configurable via Web Page

### Network

- School Wi-Fi SSID
- School Wi-Fi password

### Classroom Identity

- Room name (e.g., â€œICT Lab 2â€)
- Building
- Device ID

### Noise Control

- Green / Yellow / Red thresholds
- Escalation timing (2s / 30s / 60s)

### Alerts

- Buzzer enable / disable
- Max beeps per event
- Cooldown duration

### Cloud

- API endpoint
- Device API key

### Maintenance

- Last 10 events
- Wi-Fi signal strength
- Last server contact
- Reboot device
- Factory reset

---